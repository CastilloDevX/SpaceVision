<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Urano — Explorador Vectorial</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg1: #02101a;
      --bg2: #052233;
      --accent-1: #7be7ff;
      --accent-2: #4dd0e1;
      --glass: rgba(255,255,255,0.03);
      --card-border: rgba(123,231,255,0.06);
      --text: #eef6f8;
      --muted: rgba(238,246,248,0.78);
      --soft-shadow: 0 12px 40px rgba(0,0,0,0.6);
      --radius: 18px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:"Poppins",system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
      color:var(--text);
      background:
        radial-gradient(800px 400px at 12% 12%, rgba(77,208,225,0.03), transparent 8%),
        radial-gradient(700px 350px at 88% 86%, rgba(123,231,255,0.02), transparent 6%),
        linear-gradient(180deg,var(--bg1),var(--bg2) 60%, #000 100%);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      overflow:hidden;
    }

    header.app-header{
      position:fixed;left:0;right:0;top:0;height:86px;
      display:flex;align-items:center;justify-content:space-between;
      padding:14px 28px;gap:18px;z-index:60;
      background:linear-gradient(180deg, rgba(0,0,0,0.12), rgba(0,0,0,0.06));
      border-bottom:1px solid rgba(255,255,255,0.03);
      backdrop-filter: blur(6px);
    }

    .brand{display:flex;align-items:center;gap:16px}
    .urana-emblem{
      width:64px;height:64px;border-radius:50%;
      background: radial-gradient(circle at 35% 30%, #eaffff 0%, #bff7ff 12%, #7be7ff 48%, #3dbbd1 88%);
      box-shadow: 0 12px 40px rgba(60,180,210,0.12), inset 0 -6px 12px rgba(0,0,0,0.06);
      display:flex;align-items:center;justify-content:center;
      transform-origin:center; animation: slowFloat 10s linear infinite;
      border:1px solid rgba(255,255,255,0.03);
    }
    @keyframes slowFloat{0%{transform:translateY(0)}50%{transform:translateY(-6px)}100%{transform:translateY(0)}}
    .brand h1{font-size:18px;margin:0;font-weight:800;letter-spacing:.6px}
    .brand p{margin:2px 0 0;font-size:12px;color:var(--muted)}

    nav.top-nav{display:flex;gap:10px;align-items:center}
    .nav-btn{
      display:inline-flex;align-items:center;gap:8px;padding:8px 14px;border-radius:999px;
      background:transparent;border:1px solid rgba(255,255,255,0.03);
      color:var(--text);font-weight:700;font-size:13px;cursor:pointer;
      transition:transform .28s, box-shadow .28s, background .28s;backdrop-filter: blur(6px);
    }
    .nav-btn svg{width:18px;height:18px;display:block}
    .nav-btn:hover{transform:translateY(-6px) scale(1.03);box-shadow:0 12px 30px rgba(60,180,210,0.08)}
    .nav-btn.active{background:linear-gradient(90deg, rgba(123,231,255,0.10), rgba(77,208,225,0.04));box-shadow:0 14px 36px rgba(60,180,210,0.12)}

    main.viewport{
      position:fixed;left:0;right:0;top:86px;bottom:0;overflow:hidden;padding:28px 5%;
      z-index:20;display:flex;align-items:center;justify-content:center;
    }

    .panels{
      width:1200px;max-width:calc(100% - 80px);height:calc(100% - 120px);
      position:relative; overflow:visible; display:flex;align-items:center;justify-content:center;
    }

    .panel{
      position:absolute;inset:0;margin:auto; width:100%;height:100%;max-height:980px;
      display:grid;grid-template-columns: 1fr 480px;gap:36px;align-items:center;
      padding:48px;border-radius:20px;
      background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.006));
      border: 1px solid rgba(255,255,255,0.03); box-shadow: var(--soft-shadow);
      transform: translateX(140%) scale(.98); opacity:0;
      transition: transform .8s cubic-bezier(.2,.9,.25,1), opacity .5s;
      will-change: transform, opacity; overflow: hidden;
    }
    .panel.active{transform: translateX(0) scale(1);opacity:1;z-index:30}

    .content{ padding-right:6%; max-width:920px; }
    .panel-title{font-size:40px;color:var(--accent-1);margin:0 0 10px 0;letter-spacing:.4px}
    .lead{font-size:18px;color:var(--muted);line-height:1.6;margin-bottom:18px}
    .card-blurb{
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.008));
      padding:18px;border-radius:14px;border:1px solid var(--card-border);
    }
    .facts{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-top:18px}
    .fact{background:rgba(255,255,255,0.02);padding:10px;border-radius:10px;font-weight:600;color:var(--muted);font-size:13px}

    .media{ display:flex;flex-direction:column;align-items:center;gap:18px;justify-content:center;padding-left:6%; }
    .illustration-wrap{
      width:100%;max-width:460px;height:420px;border-radius:16px;
      display:flex;align-items:center;justify-content:center;
      background:linear-gradient(180deg, rgba(0,0,0,0.18), rgba(0,0,0,0.12));
      border:1px solid rgba(255,255,255,0.03); box-shadow: 0 18px 50px rgba(0,0,0,0.6);
      overflow:hidden;position:relative;
    }
    .illustration{ width:90%;height:90%; display:block; transform-origin:center;
      transition: transform .8s cubic-bezier(.2,.9,.25,1), filter .6s;
      filter: drop-shadow(0 12px 40px rgba(0,120,160,0.10));
    }
    .illustration-wrap:hover .illustration{ transform: scale(1.03) rotate(-2deg) }

    .meta-card{ width:100%;padding:12px;border-radius:12px;background:rgba(255,255,255,0.02); border:1px solid var(--card-border);display:flex;gap:12px;align-items:center; }
    .meta-card .dot{width:14px;height:14px;border-radius:50%;background:var(--accent-1)}
    .meta-card p{margin:0;font-size:13px;color:var(--muted)}

    .side-progress{ position:fixed;right:22px;top:50%;transform:translateY(-50%);display:flex;flex-direction:column;gap:12px;z-index:40; }
    .dot-btn{width:14px;height:14px;border-radius:50%;background:rgba(255,255,255,0.06);border:1px solid rgba(255,255,255,0.03);cursor:pointer}
    .dot-btn.active{background:linear-gradient(180deg,var(--accent-1),var(--accent-2));box-shadow:0 10px 26px rgba(77,208,225,0.16);transform:scale(1.25)}

    @media (max-width:1100px){ .panels{max-width:calc(100% - 60px)} .panel{grid-template-columns: 1fr 380px;padding:32px} .illustration-wrap{height:360px} }
    @media (max-width:900px){ main.viewport{padding:18px} .panel{grid-template-columns:1fr;padding:22px;border-radius:14px} .illustration-wrap{max-width:100%;height:320px} }
    @media (max-width:640px){ .panel{grid-template-columns:1fr;gap:18px;padding:18px;align-items:flex-start} .media{order:-1;padding-left:0} .illustration-wrap{height:260px} .panel-title{font-size:28px} }

    .stagger{opacity:0;transform:translateY(8px);transition: all .6s cubic-bezier(.2,.9,.25,1)}
    .stagger.show{opacity:1;transform:none}
  </style>
</head>
<body>
  <canvas id="particle-canvas" style="position:fixed;inset:0;z-index:5;pointer-events:none"></canvas>

  <header class="app-header" role="banner">
    <div class="brand" aria-hidden="false">
      <div class="urana-emblem" aria-hidden="true"></div>
      <div>
        <h1>URANO</h1>
        <p>Explorador vectorial — interactivo</p>
      </div>
    </div>

    <nav class="top-nav" role="navigation" aria-label="Navegación principal">
      <button class="nav-btn active" data-target="0" aria-pressed="true" title="Composición y estructura">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M12 2v3"/><path d="M12 19v3"/></svg> Composición
      </button>
      <button class="nav-btn" data-target="1" title="Atmósfera">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12h18"/><path d="M6 6h12"/><path d="M6 18h12"/></svg> Atmósfera
      </button>
      <button class="nav-btn" data-target="2" title="Movimiento y órbita">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="8"/><path d="M3 12h4l2-4"/></svg> Movimiento
      </button>
      <button class="nav-btn" data-target="3" title="Influencia y curiosidades">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2c2 2 6 3 8 6"/><path d="M12 22c-2-2-6-3-8-6"/></svg> Curiosidades
      </button>
    </nav>
  </header>

  <main class="viewport" role="main">
    <div class="panels">

      <!-- PANEL 0: Composición y estructura -->
      <section class="panel active" data-index="0" id="panel-0" aria-labelledby="title-0" role="region">
        <div class="content">
          <h2 id="title-0" class="panel-title stagger show">Composición y estructura</h2>
          <p class="lead stagger show" style="transition-delay:.05s">
            Urano es un gigante helado: su interior contiene agua, amoníaco y metano sobre un núcleo rocoso. Tiene una densidad menor que los gigantes gaseosos y capas diferenciadas de hielo y gas.
          </p>
          <div class="card-blurb stagger show" style="transition-delay:.12s">
            <strong>Núcleo:</strong> posiblemente rocoso y denso.<br>
            <strong>Manto:</strong> rico en agua y otros hielos (amoniaco, metano).<br>
            <strong>Atmósfera:</strong> hidrógeno y helio con metano que le aporta el color azul verdoso.
          </div>
          <div class="facts stagger show" style="transition-delay:.20s">
            <div class="fact"><strong>Tipo:</strong> Gigante helado</div>
            <div class="fact"><strong>Composición:</strong> H₂, He, agua/amoniaco/metano</div>
            <div class="fact"><strong>Temp. atmosf.:</strong> ~-224 °C</div>
            <div class="fact"><strong>Lunas:</strong> al menos 27</div>
          </div>
        </div>

        <aside class="media">
          <div class="illustration-wrap" aria-hidden="false">
            <!-- SVG: Urano esquema inclinado + anillos sutiles -->
            <svg class="illustration" viewBox="0 0 800 720" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Esquema vectorial de Urano">
              <defs>
                <radialGradient id="u_core" cx="45%" cy="45%">
                  <stop offset="0%" stop-color="#eaffff"/>
                  <stop offset="45%" stop-color="#bff7ff"/>
                  <stop offset="100%" stop-color="#59d3e6"/>
                </radialGradient>
                <linearGradient id="ringGrad" x1="0" x2="1">
                  <stop offset="0%" stop-color="#dffaff" stop-opacity="0.95"/>
                  <stop offset="100%" stop-color="#6fe6ff" stop-opacity="0.6"/>
                </linearGradient>
                <filter id="softGlow" x="-50%" y="-50%" width="200%" height="200%">
                  <feGaussianBlur stdDeviation="8" result="b"/>
                  <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
                </filter>
              </defs>

              <rect width="100%" height="100%" fill="transparent"/>

              <g transform="translate(400,360)">
                <!-- tilt indicator -->
                <g transform="rotate(-98)">
                  <!-- rings -->
                  <ellipse rx="260" ry="36" fill="none" stroke="url(#ringGrad)" stroke-width="10" opacity="0.28"/>
                  <ellipse rx="200" ry="28" fill="none" stroke="url(#ringGrad)" stroke-width="6" opacity="0.22"/>
                </g>

                <!-- planet -->
                <g>
                  <circle r="120" fill="url(#u_core)" filter="url(#softGlow)"/>
                  <!-- subtle banding -->
                  <g opacity="0.12" stroke="#bff7ff" stroke-width="6" fill="none">
                    <path d="M-100,-20 C-60,-10 60,-10 100,-20"/>
                    <path d="M-100,20 C-60,30 60,30 100,20"/>
                  </g>
                </g>

                <!-- tilt label -->
                <g transform="translate(160,-140)" fill="#eafcff" font-size="13" opacity="0.95">
                  <text x="0" y="0">Incl. de eje ≈ 98°</text>
                </g>
              </g>
            </svg>
          </div>

          <div class="meta-card">
            <div style="flex:1">
              <div style="font-weight:800">Visión</div>
              <p style="margin:6px 0 0 0;color:var(--muted);font-size:13px">Urano es diferente: su gran inclinación y composición lo hacen un "gigante helado".</p>
            </div>
            <div class="dot" aria-hidden="true"></div>
          </div>
        </aside>
      </section>

      <!-- PANEL 1: Atmósfera -->
      <section class="panel" data-index="1" id="panel-1" aria-labelledby="title-1" role="region">
        <div class="content">
          <h2 id="title-1" class="panel-title stagger">Atmósfera</h2>
          <p class="lead stagger" style="transition-delay:.05s">
            La atmósfera de Urano contiene hidrógeno, helio y metano; el metano absorbe luz roja y produce su característico tono azul verdoso. Es una de las atmósferas más frías del sistema solar.
          </p>
          <div class="card-blurb stagger" style="transition-delay:.12s">
            El metano y los hielos en el manto contribuyen a propiedades físicas diferentes a las de gigantes gaseosos como Júpiter.
          </div>
          <div class="facts stagger" style="transition-delay:.20s">
            <div class="fact"><strong>Componentes:</strong> H₂, He, CH₄</div>
            <div class="fact"><strong>Color:</strong> azul verdoso (metano)</div>
            <div class="fact"><strong>Temperatura:</strong> ~-224 °C</div>
            <div class="fact"><strong>Anillos:</strong> tenue, visibles en observación</div>
          </div>
        </div>

        <aside class="media">
          <div class="illustration-wrap">
            <!-- SVG: Atmósfera y capas, estilizado -->
            <svg class="illustration" viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Ilustración de la atmósfera de Urano">
              <defs>
                <linearGradient id="atm" x1="0" x2="0">
                  <stop offset="0%" stop-color="#eaffff"/>
                  <stop offset="100%" stop-color="#7be7ff"/>
                </linearGradient>
              </defs>
              <rect width="100%" height="100%" fill="transparent"/>
              <g transform="translate(400,300)">
                <circle r="120" fill="#7be7ff" opacity="0.98"/>
                <g opacity="0.14" fill="#eaffff">
                  <ellipse rx="140" ry="26" transform="translate(0,-10)"/>
                  <ellipse rx="140" ry="18" transform="translate(0,20)"/>
                </g>
                <g transform="translate(-20,-70)" fill="#fff" font-size="13" opacity="0.95">
                  <text x="0" y="0">Metano</text>
                </g>
                <g transform="translate(-80,70)" fill="#fff" font-size="13" opacity="0.9">
                  <text x="0" y="0">Hidrógeno / Helio</text>
                </g>
              </g>
            </svg>
          </div>

          <div class="meta-card">
            <div style="flex:1">
              <div style="font-weight:800">Nota</div>
              <p style="margin:6px 0 0 0;color:var(--muted);font-size:13px">La tenue atmósfera limita la dinámica superficial como ocurre en planetas rocosos.</p>
            </div>
            <div class="dot" aria-hidden="true"></div>
          </div>
        </aside>
      </section>

      <!-- PANEL 2: Movimiento y órbita -->
      <section class="panel" data-index="2" id="panel-2" aria-labelledby="title-2" role="region">
        <div class="content">
          <h2 id="title-2" class="panel-title stagger">Movimiento y órbita</h2>
          <p class="lead stagger" style="transition-delay:.05s">
            Urano tarda 84 años terrestres en completar una órbita alrededor del Sol. Su rotación es relativamente rápida y, sobre todo, su eje está casi de lado, lo que causa estaciones extremas.
          </p>
          <div class="card-blurb stagger" style="transition-delay:.12s">
            La inclinación axial (~98°) provoca que los polos apunten casi hacia el Sol durante parte de su órbita, generando largos periodos de luz u oscuridad.
          </div>
          <div class="facts stagger" style="transition-delay:.20s">
            <div class="fact"><strong>Año:</strong> ~84 años terrestres</div>
            <div class="fact"><strong>Rotación:</strong> ~17 horas (aprox.)</div>
            <div class="fact"><strong>Inclinación:</strong> ≈ 98°</div>
            <div class="fact"><strong>Estaciones:</strong> extremas y prolongadas</div>
          </div>
        </div>

        <aside class="media">
          <div class="illustration-wrap">
            <!-- SVG: Órbita y axial tilt -->
            <svg class="illustration" viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Ilustración de la órbita e inclinación de Urano">
              <rect width="100%" height="100%" fill="transparent"/>
              <g transform="translate(400,300)">
                <ellipse rx="260" ry="200" fill="none" stroke="#6fe6ff" stroke-width="2" opacity="0.18"/>
                <g transform="rotate(-98)">
                  <circle cx="260" cy="0" r="12" fill="#7be7ff" opacity="0.98"/>
                  <line x1="260" y1="-30" x2="260" y2="30" stroke="#eaffff" stroke-width="2" opacity="0.6"/>
                </g>
                <g transform="translate(-20,-10)" fill="#fff" font-size="13" opacity="0.9">
                  <text x="0" y="-150">Órbita ~84 años</text>
                </g>
              </g>
            </svg>
          </div>

          <div class="meta-card">
            <div style="flex:1">
              <div style="font-weight:800">Observación</div>
              <p style="margin:6px 0 0 0;color:var(--muted);font-size:13px">Su inclinación axial es una de las características más llamativas y estudiadas.</p>
            </div>
            <div class="dot" aria-hidden="true"></div>
          </div>
        </aside>
      </section>

      <!-- PANEL 3: Influencia y curiosidades -->
      <section class="panel" data-index="3" id="panel-3" aria-labelledby="title-3" role="region">
        <div class="content">
          <h2 id="title-3" class="panel-title stagger">Influencia y curiosidades</h2>
          <p class="lead stagger" style="transition-delay:.05s">
            Urano posee un sistema de anillos tenue y al menos 27 lunas conocidas. Es uno de los planetas menos explorados por sondas; su frialdad y composición lo hacen especialmente interesante para estudiar la química de hielos.
          </p>
          <div class="card-blurb stagger" style="transition-delay:.12s">
            Sus lunas y anillos aportan información sobre procesos de formación y evolución en los gigantes helados.
          </div>
          <div class="facts stagger" style="transition-delay:.20s">
            <div class="fact"><strong>Anillos:</strong> sistema estrecho y tenue</div>
            <div class="fact"><strong>Lunas:</strong> ≥ 27 (Titulares: Miranda, Ariel, Umbriel, Titania, Oberón)</div>
            <div class="fact"><strong>Exploración:</strong> visitado brevemente por Voyager 2</div>
            <div class="fact"><strong>Interés:</strong> química de hielos y dinámica axial</div>
          </div>
        </div>

        <aside class="media">
          <div class="illustration-wrap">
            <!-- SVG: Anillos y lunas estilizados -->
            <svg class="illustration" viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Ilustración de los anillos y lunas de Urano">
              <rect width="100%" height="100%" fill="transparent"/>
              <g transform="translate(400,300)">
                <ellipse rx="220" ry="32" fill="none" stroke="#aef7ff" stroke-width="8" opacity="0.22"/>
                <circle r="80" fill="#6fe6ff" opacity="0.98"/>
                <g transform="translate(200,-40)" fill="#fff" opacity="0.95" font-size="12">
                  <text x="-18" y="0">Anillos</text>
                </g>

                <!-- small moons -->
                <g fill="#eaffff" opacity="0.95">
                  <circle cx="-160" cy="-30" r="6"/>
                  <circle cx="-120" cy="80" r="5"/>
                  <circle cx="140" cy="-60" r="7"/>
                  <circle cx="90" cy="110" r="5"/>
                </g>
              </g>
            </svg>
          </div>

          <div class="meta-card">
            <div style="flex:1">
              <div style="font-weight:800">Curioso</div>
              <p style="margin:6px 0 0 0;color:var(--muted);font-size:13px">Solo una sonda (Voyager 2) visitó Urano de cerca en 1986; hay mucho por descubrir.</p>
            </div>
            <div class="dot" aria-hidden="true"></div>
          </div>
        </aside>
      </section>

    </div>
  </main>

  <div class="side-progress" aria-hidden="false">
    <div class="dot-btn active" data-target="0" title="Composición"></div>
    <div class="dot-btn" data-target="1" title="Atmósfera"></div>
    <div class="dot-btn" data-target="2" title="Movimiento"></div>
    <div class="dot-btn" data-target="3" title="Curiosidades"></div>
  </div>

  <script>
    (function particles(){
      const canvas = document.getElementById('particle-canvas');
      const ctx = canvas.getContext('2d');
      let w = canvas.width = innerWidth, h = canvas.height = innerHeight;
      window.addEventListener('resize', ()=>{ w=canvas.width=innerWidth; h=canvas.height=innerHeight; });
      const N = Math.round((w*h)/90000);
      const parts = Array.from({length: Math.max(50, N)}, ()=>({
        x: Math.random()*w, y: Math.random()*h,
        r: Math.random()*1.6 + 0.2,
        vx: (Math.random()-0.5)*0.12, vy: (Math.random()-0.5)*0.12,
        alpha: Math.random()*0.6 + 0.12
      }));
      function step(){
        ctx.clearRect(0,0,w,h);
        for(const p of parts){
          p.x += p.vx; p.y += p.vy;
          if(p.x < -10) p.x = w + 10;
          if(p.x > w + 10) p.x = -10;
          if(p.y < -10) p.y = h + 10;
          if(p.y > h + 10) p.y = -10;
          ctx.beginPath();
          ctx.fillStyle = 'rgba(123,231,255,'+ (p.alpha*0.7) +')';
          ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
          ctx.fill();
        }
        requestAnimationFrame(step);
      }
      step();
    })();

    const panels = Array.from(document.querySelectorAll('.panel'));
    const navBtns = Array.from(document.querySelectorAll('.nav-btn'));
    const dots = Array.from(document.querySelectorAll('.dot-btn'));
    let current = 0;
    const STAGGER_DELAY = 90;

    function setActive(index){
      if(index === current) return;
      index = Math.max(0, Math.min(panels.length-1, index));
      const prev = current, next = index;
      panels[prev].classList.remove('active');
      navBtns[prev].classList.remove('active');
      navBtns[prev].setAttribute('aria-pressed','false');
      dots[prev].classList.remove('active');

      panels[next].classList.add('active');
      navBtns[next].classList.add('active');
      navBtns[next].setAttribute('aria-pressed','true');
      dots[next].classList.add('active');

      revealStagger(panels[next]);
      current = next;
      history.replaceState(null, '', '#p' + next);
    }

    function revealStagger(panelEl){
      const items = panelEl.querySelectorAll('.stagger');
      items.forEach((it, i) => {
        it.classList.remove('show');
        setTimeout(()=> it.classList.add('show'), i * STAGGER_DELAY + 90);
      });
    }

    navBtns.forEach(b => b.addEventListener('click', ()=> {
      const target = Number(b.dataset.target);
      setActive(target);
    }));
    dots.forEach(d => d.addEventListener('click', ()=> {
      const target = Number(d.dataset.target);
      setActive(target);
    }));

    window.addEventListener('keydown', e => {
      if(e.key === 'ArrowRight'){ if(current < panels.length-1) setActive(current+1); }
      if(e.key === 'ArrowLeft'){ if(current > 0) setActive(current-1); }
    });

    (function swipe(){
      let sx=0;
      window.addEventListener('touchstart', e => { sx = e.touches[0].clientX; }, {passive:true});
      window.addEventListener('touchend', e => {
        const ex = e.changedTouches[0].clientX;
        const dx = ex - sx;
        if(Math.abs(dx) > 50){
          if(dx < 0 && current < panels.length-1) setActive(current+1);
          if(dx > 0 && current > 0) setActive(current-1);
        }
      }, {passive:true});
    })();

    document.addEventListener('DOMContentLoaded', ()=> {
      revealStagger(panels[0]);
      const hash = window.location.hash;
      if(hash && hash.startsWith('#p')){
        const idx = parseInt(hash.slice(2));
        if(!isNaN(idx) && idx >= 0 && idx < panels.length) setActive(idx);
      }
    });
  </script>
</body>
</html>
