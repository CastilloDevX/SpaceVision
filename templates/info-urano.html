<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>URANUS — Vector Explorer</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg1:#02101a; --bg2:#052233;
      --accent-1:#7be7ff; --accent-2:#4dd0e1;
      --card-border: rgba(123,231,255,0.06);
      --text:#eef6f8; --muted:rgba(238,246,248,0.78);
      --soft-shadow:0 12px 40px rgba(0,0,0,.6);
      --focus:0 0 0 3px rgba(123,231,255,.45), 0 0 0 6px rgba(123,231,255,.18);

      /* fluid sizing */
      --space: clamp(14px,2.2vw,24px);
      --panel-gap: clamp(16px,3vw,36px);
      --panel-radius: clamp(12px,2.2vw,20px);
      --title: clamp(24px,4vw,40px);
      --lead: clamp(15px,2.2vw,18px);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:"Poppins",system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
      color:var(--text);
      background:
        radial-gradient(800px 400px at 12% 12%, rgba(77,208,225,0.03), transparent 8%),
        radial-gradient(700px 350px at 88% 86%, rgba(123,231,255,0.02), transparent 6%),
        linear-gradient(180deg,var(--bg1),var(--bg2) 60%, #000 100%);
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
      overflow:hidden; /* page doesn’t scroll; panels do */
    }

    /* Skip to content */
    .skip-link{position:fixed;left:12px;top:10px;z-index:1000;background:#0b1722;color:#fff;padding:8px 12px;border-radius:10px;transform:translateY(-140%);transition:transform .2s}
    .skip-link:focus{transform:translateY(0);outline:none;box-shadow:var(--focus)}

    /* Header */
    header.app-header{position:fixed;inset:0 0 auto 0;display:flex;align-items:center;justify-content:space-between;gap:18px;z-index:60;padding:calc(env(safe-area-inset-top)+12px) clamp(16px,4vw,28px) 12px;background:linear-gradient(180deg,rgba(0,0,0,.12),rgba(0,0,0,.06));border-bottom:1px solid rgba(255,255,255,.03);backdrop-filter:blur(6px)}
    .brand{display:flex;align-items:center;gap:16px;min-width:0}
    .uranus-emblem{width:clamp(48px,6.5vw,64px);height:clamp(48px,6.5vw,64px);border-radius:50%;background:radial-gradient(circle at 35% 30%,#eaffff 0%,#bff7ff 12%,#7be7ff 48%,#3dbbd1 88%);box-shadow:0 12px 40px rgba(60,180,210,.12), inset 0 -6px 12px rgba(0,0,0,.06);display:flex;align-items:center;justify-content:center;border:1px solid rgba(255,255,255,.03);animation:float 10s ease-in-out infinite;transform-origin:center}
    @keyframes float{0%{transform:translateY(0)}50%{transform:translateY(-6px)}100%{transform:translateY(0)}}
    .brand h1{font-size:clamp(16px,2.7vw,20px);margin:0;font-weight:800;letter-spacing:.6px;white-space:nowrap}
    .brand p{margin:2px 0 0;font-size:clamp(11px,2.2vw,12px);color:var(--muted);white-space:nowrap}

    /* Top nav */
    nav.top-nav{display:flex;gap:10px;align-items:center;max-width:100%;overflow:auto;-webkit-overflow-scrolling:touch;padding-bottom:6px}
    nav.top-nav::-webkit-scrollbar{height:6px}
    nav.top-nav::-webkit-scrollbar-thumb{background:rgba(255,255,255,.12);border-radius:999px}
    .nav-btn{display:inline-flex;align-items:center;gap:8px;padding:8px 14px;border-radius:999px;background:transparent;border:1px solid rgba(255,255,255,.03);color:var(--text);font-weight:700;font-size:13px;cursor:pointer;transition:transform .28s,box-shadow .28s,background .28s;backdrop-filter:blur(6px);white-space:nowrap}
    .nav-btn svg{width:18px;height:18px;display:block}
    .nav-btn:hover{transform:translateY(-6px) scale(1.03);box-shadow:0 12px 30px rgba(60,180,210,.12)}
    .nav-btn.active{background:linear-gradient(90deg, rgba(123,231,255,.10), rgba(77,208,225,.04));box-shadow:0 14px 36px rgba(60,180,210,.14)}
    .nav-btn:focus-visible{outline:none;box-shadow:var(--focus)}

    /* Viewport & panels */
    main.viewport{position:fixed;left:0;right:0;bottom:0;top:calc(64px + env(safe-area-inset-top));height:calc(100dvh - (64px + env(safe-area-inset-top)));overflow:hidden;padding:var(--space) clamp(16px,4vw,5%);z-index:20;display:flex;align-items:center;justify-content:center}
    .panels{width:min(1200px,100%);height:100%;position:relative;display:flex;align-items:stretch;justify-content:center}

    .panel{position:absolute;inset:0;margin:auto;width:100%;height:100%;display:grid;grid-template-columns:1fr minmax(300px,480px);gap:var(--panel-gap);align-items:start;padding:clamp(16px,3.5vw,48px);border-radius:var(--panel-radius);background:linear-gradient(180deg,rgba(255,255,255,.01),rgba(255,255,255,.006));border:1px solid rgba(255,255,255,.03);box-shadow:var(--soft-shadow);transform:translateX(140%) scale(.98);opacity:0;transition:transform .8s cubic-bezier(.2,.9,.25,1), opacity .5s;will-change:transform,opacity;overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch}
    .panel.active{transform:translateX(0) scale(1);opacity:1;z-index:30}
    .panel:focus{outline:none}
    .panel:focus-visible{box-shadow:var(--focus)}

    .content{padding-right:4%;max-width:920px;min-height:0}
    .panel-title{font-size:var(--title);color:var(--accent-1);margin:0 0 10px 0;letter-spacing:.4px}
    .lead{font-size:var(--lead);color:var(--muted);line-height:1.6;margin-bottom:var(--space)}
    .card-blurb{background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.008));padding:14px;border-radius:14px;border:1px solid var(--card-border)}
    .facts{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-top:12px}
    .fact{background:rgba(255,255,255,.02);padding:10px;border-radius:10px;font-weight:600;color:var(--muted);font-size:13px}

    .media{display:flex;flex-direction:column;align-items:center;gap:14px;justify-content:flex-start;padding-left:4%;min-height:0}
    .illustration-wrap{width:100%;max-width:460px;height:clamp(240px,35vh,420px);border-radius:16px;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,rgba(0,0,0,.18),rgba(0,0,0,.12));border:1px solid rgba(255,255,255,.03);box-shadow:0 18px 50px rgba(0,0,0,.6);overflow:hidden;position:relative;flex:0 0 auto}
    .illustration{width:90%;height:90%;display:block;transform-origin:center;transition:transform .8s cubic-bezier(.2,.9,.25,1), filter .6s;filter:drop-shadow(0 12px 40px rgba(0,120,160,.10))}
    .illustration-wrap:hover .illustration{transform:scale(1.03) rotate(-2deg)}

    .meta-card{width:100%;padding:12px;border-radius:12px;background:rgba(255,255,255,.02);border:1px solid var(--card-border);display:flex;gap:12px;align-items:center;flex:0 0 auto}
    .meta-card .dot{width:14px;height:14px;border-radius:50%;background:var(--accent-1)}
    .meta-card p{margin:0;font-size:13px;color:var(--muted)}

    /* Side progress */
    .side-progress{position:fixed;right:22px;top:50%;transform:translateY(-50%);display:flex;flex-direction:column;gap:12px;z-index:40}
    .dot-btn{width:14px;height:14px;border-radius:50%;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.03);cursor:pointer}
    .dot-btn.active{background:linear-gradient(180deg,var(--accent-1),var(--accent-2));box-shadow:0 10px 26px rgba(77,208,225,.16);transform:scale(1.25)}
    .dot-btn:focus-visible{outline:none;box-shadow:var(--focus)}

    /* Responsive tweaks */
    @media (max-width:1100px){.content{padding-right:0}.media{padding-left:0}}
    @media (max-width:900px){main.viewport{padding:var(--space)}.panel{grid-template-columns:1fr}.illustration-wrap{max-width:100%}.facts{grid-template-columns:1fr 1fr}}
    @media (max-width:720px){.brand p{display:none}.nav-btn{padding:8px 10px;font-size:0}.nav-btn svg{width:20px;height:20px}}
    @media (max-width:640px){.panel{gap:var(--panel-gap);padding:clamp(12px,3.5vw,18px);align-items:flex-start}.media{order:-1}.illustration-wrap{height:clamp(220px,34vh,320px)}.panel-title{font-size:clamp(20px,6vw,28px)}.facts{grid-template-columns:1fr}.side-progress{left:0;right:0;bottom:env(safe-area-inset-bottom);top:auto;transform:none;flex-direction:row;justify-content:center;gap:10px;padding:10px 0}.dot-btn{width:12px;height:12px}}

    /* staged reveals */
    .stagger{opacity:0;transform:translateY(8px);transition: all .6s cubic-bezier(.2,.9,.25,1)}
    .stagger.show{opacity:1;transform:none}

    @media (prefers-reduced-motion: reduce){*{animation:none!important;transition:none!important}}
  </style>
</head>
<body>
  <a class="skip-link" href="#panel-0">Skip to content</a>
  <canvas id="particle-canvas" aria-hidden="true" style="position:fixed;inset:0;z-index:5;pointer-events:none"></canvas>

  <header class="app-header" role="banner">
    <div class="brand" aria-hidden="false">
      <div class="uranus-emblem" aria-hidden="true"></div>
      <div>
        <h1>URANUS</h1>
        <p>Vector Explorer — interactive</p>
      </div>
    </div>

    <nav class="top-nav" role="navigation" aria-label="Main navigation">
      <button class="nav-btn active" data-target="0" aria-pressed="true" aria-controls="panel-0" title="Composition & structure" aria-label="Composition">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><circle cx="12" cy="12" r="3"/><path d="M12 2v3"/><path d="M12 19v3"/></svg>
        <span class="label">Composition</span>
      </button>
      <button class="nav-btn" data-target="1" aria-controls="panel-1" title="Atmosphere" aria-label="Atmosphere">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M3 12h18"/><path d="M6 6h12"/><path d="M6 18h12"/></svg>
        <span class="label">Atmosphere</span>
      </button>
      <button class="nav-btn" data-target="2" aria-controls="panel-2" title="Motion & orbit" aria-label="Orbit">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><circle cx="12" cy="12" r="8"/><path d="M3 12h4l2-4"/></svg>
        <span class="label">Orbit</span>
      </button>
      <button class="nav-btn" data-target="3" aria-controls="panel-3" title="Curiosities & influence" aria-label="Curiosities">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M12 2c2 2 6 3 8 6"/><path d="M12 22c-2-2-6-3-8-6"/></svg>
        <span class="label">Curiosities</span>
      </button>
    </nav>
  </header>

  <main class="viewport" role="main">
    <div class="panels">

      <!-- Panel 0: Composition & structure -->
      <section class="panel active" data-index="0" id="panel-0" aria-labelledby="title-0" role="region" tabindex="-1">
        <div class="content">
          <h2 id="title-0" class="panel-title stagger show">Composition & structure</h2>
          <p class="lead stagger show" style="transition-delay:.05s">Uranus is an ice giant: a rocky core overlain by a deep layer of "ices" (water, ammonia, methane) and a lighter outer gas envelope.</p>
          <div class="card-blurb stagger show" style="transition-delay:.12s">
            <strong>Core:</strong> likely rocky and dense. <br>
            <strong>Ice-rich mantle:</strong> water + ammonia + methane dominating the interior. <br>
            <strong>Atmosphere:</strong> hydrogen/helium with methane that gives the blue‑green tint.
          </div>
          <div class="facts stagger show" style="transition-delay:.20s">
            <div class="fact"><strong>Type:</strong> Ice giant</div>
            <div class="fact"><strong>Composition:</strong> H₂, He + ices (H₂O, NH₃, CH₄)</div>
            <div class="fact"><strong>Atm. temperature:</strong> ~−224 °C</div>
            <div class="fact"><strong>Moons:</strong> at least 27</div>
          </div>
        </div>
        <aside class="media">
          <div class="illustration-wrap" aria-hidden="false">
            <!-- Uranus tilted + subtle rings -->
            <svg class="illustration" viewBox="0 0 800 720" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Uranus cross‑section and rings">
              <defs>
                <radialGradient id="u_core" cx="45%" cy="45%">
                  <stop offset="0%" stop-color="#eaffff"/>
                  <stop offset="45%" stop-color="#bff7ff"/>
                  <stop offset="100%" stop-color="#59d3e6"/>
                </radialGradient>
                <linearGradient id="ringGrad" x1="0" x2="1">
                  <stop offset="0%" stop-color="#dffaff" stop-opacity="0.95"/>
                  <stop offset="100%" stop-color="#6fe6ff" stop-opacity="0.6"/>
                </linearGradient>
                <filter id="softGlow" x="-50%" y="-50%" width="200%" height="200%">
                  <feGaussianBlur stdDeviation="8" result="b"/>
                  <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
                </filter>
              </defs>
              <rect width="100%" height="100%" fill="transparent"/>
              <g transform="translate(400,360)">
                <g transform="rotate(-98)">
                  <ellipse rx="260" ry="36" fill="none" stroke="url(#ringGrad)" stroke-width="10" opacity="0.28"/>
                  <ellipse rx="200" ry="28" fill="none" stroke="url(#ringGrad)" stroke-width="6" opacity="0.22"/>
                </g>
                <g>
                  <circle r="120" fill="url(#u_core)" filter="url(#softGlow)"/>
                  <g opacity="0.12" stroke="#bff7ff" stroke-width="6" fill="none">
                    <path d="M-100,-20 C-60,-10 60,-10 100,-20"/>
                    <path d="M-100,20 C-60,30 60,30 100,20"/>
                  </g>
                </g>
                <g transform="translate(160,-140)" fill="#eafcff" font-size="13" opacity="0.95">
                  <text x="0" y="0">Axial tilt ≈ 98°</text>
                </g>
              </g>
            </svg>
          </div>
          <div class="meta-card" role="note" aria-label="Quick summary">
            <div style="flex:1">
              <div style="font-weight:800">Quick summary</div>
              <p style="margin:6px 0 0 0;color:var(--muted);font-size:13px">Rocky core, ice‑rich mantle, light gas envelope — distinct blue‑green tint from methane.</p>
            </div>
            <div class="dot" aria-hidden="true"></div>
          </div>
        </aside>
      </section>

      <!-- Panel 1: Atmosphere -->
      <section class="panel" data-index="1" id="panel-1" aria-labelledby="title-1" role="region" tabindex="-1">
        <div class="content">
          <h2 id="title-1" class="panel-title stagger">Atmosphere</h2>
          <p class="lead stagger" style="transition-delay:.05s">Hydrogen, helium and methane dominate; methane absorbs red light and yields the cyan hue. Among the coldest atmospheres in the Solar System.</p>
          <div class="card-blurb stagger" style="transition-delay:.12s">Methane and ice phases in the mantle lead to properties that differ from gas giants like Jupiter.</div>
          <div class="facts stagger" style="transition-delay:.20s">
            <div class="fact"><strong>Components:</strong> H₂, He, CH₄</div>
            <div class="fact"><strong>Color:</strong> blue‑green (methane)</div>
            <div class="fact"><strong>Mean temp:</strong> ~−224 °C</div>
            <div class="fact"><strong>Rings:</strong> faint, narrow</div>
          </div>
        </div>
        <aside class="media">
          <div class="illustration-wrap">
            <svg class="illustration" viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Uranus atmosphere schematic">
              <rect width="100%" height="100%" fill="transparent"/>
              <g transform="translate(400,300)">
                <circle r="120" fill="#7be7ff" opacity="0.98"/>
                <g opacity="0.14" fill="#eaffff">
                  <ellipse rx="140" ry="26" transform="translate(0,-10)"/>
                  <ellipse rx="140" ry="18" transform="translate(0,20)"/>
                </g>
                <g transform="translate(-24,-72)" fill="#fff" font-size="13" opacity="0.95"><text>CH₄ (methane)</text></g>
                <g transform="translate(-92,70)" fill="#fff" font-size="13" opacity="0.9"><text>H₂ / He</text></g>
              </g>
            </svg>
          </div>
          <div class="meta-card" role="note" aria-label="Atmospheric note">
            <div style="flex:1">
              <div style="font-weight:800">Note</div>
              <p style="margin:6px 0 0 0;color:var(--muted);font-size:13px">Extremely cold upper atmosphere; dynamics differ from classic gas giants.</p>
            </div>
            <div class="dot" aria-hidden="true"></div>
          </div>
        </aside>
      </section>

      <!-- Panel 2: Motion & orbit -->
      <section class="panel" data-index="2" id="panel-2" aria-labelledby="title-2" role="region" tabindex="-1">
        <div class="content">
          <h2 id="title-2" class="panel-title stagger">Motion & orbit</h2>
          <p class="lead stagger" style="transition-delay:.05s">Uranus takes about <strong>84 Earth years</strong> to orbit the Sun. It rotates in ~<strong>17 hours</strong> and its axis lies nearly on its side, driving extreme seasons.</p>
          <div class="card-blurb stagger" style="transition-delay:.12s">Axial tilt (~98°) points the poles toward the Sun for parts of its year, yielding long spans of daylight or darkness.</div>
          <div class="facts stagger" style="transition-delay:.20s">
            <div class="fact"><strong>Year:</strong> ~84 Earth years</div>
            <div class="fact"><strong>Rotation:</strong> ~17 hours</div>
            <div class="fact"><strong>Tilt:</strong> ≈ 98°</div>
            <div class="fact"><strong>Seasons:</strong> extreme, prolonged</div>
          </div>
        </div>
        <aside class="media">
          <div class="illustration-wrap">
            <svg class="illustration" viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Uranus orbit & tilt">
              <rect width="100%" height="100%" fill="transparent"/>
              <g transform="translate(400,300)">
                <ellipse rx="260" ry="200" fill="none" stroke="#6fe6ff" stroke-width="2" opacity="0.18"/>
                <g transform="rotate(-98)">
                  <circle cx="260" cy="0" r="12" fill="#7be7ff" opacity="0.98"/>
                  <line x1="260" y1="-30" x2="260" y2="30" stroke="#eaffff" stroke-width="2" opacity="0.6"/>
                </g>
                <g transform="translate(-20,-10)" fill="#fff" font-size="13" opacity="0.9"><text x="0" y="-150">Orbital period ≈ 84 years</text></g>
              </g>
            </svg>
          </div>
          <div class="meta-card" role="note" aria-label="Observation">
            <div style="flex:1">
              <div style="font-weight:800">Observation</div>
              <p style="margin:6px 0 0 0;color:var(--muted);font-size:13px">The near‑sideways axis is one of Uranus’s most striking traits.</p>
            </div>
            <div class="dot" aria-hidden="true"></div>
          </div>
        </aside>
      </section>

      <!-- Panel 3: Curiosities & influence -->
      <section class="panel" data-index="3" id="panel-3" aria-labelledby="title-3" role="region" tabindex="-1">
        <div class="content">
          <h2 id="title-3" class="panel-title stagger">Curiosities & influence</h2>
          <p class="lead stagger" style="transition-delay:.05s">Uranus has a faint ring system and at least 27 known moons. Only Voyager 2 has flown by (1986), so there’s plenty left to explore.</p>
          <div class="card-blurb stagger" style="transition-delay:.12s">Its moons and rings inform models of formation and evolution for ice giants.</div>
          <div class="facts stagger" style="transition-delay:.20s">
            <div class="fact"><strong>Rings:</strong> narrow, faint</div>
            <div class="fact"><strong>Moons:</strong> ≥ 27 (Miranda, Ariel, Umbriel, Titania, Oberon)</div>
            <div class="fact"><strong>Exploration:</strong> Voyager 2 flyby (1986)</div>
            <div class="fact"><strong>Interest:</strong> ice chemistry & axial dynamics</div>
          </div>
        </div>
        <aside class="media">
          <div class="illustration-wrap">
            <svg class="illustration" viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Uranus rings and moons">
              <rect width="100%" height="100%" fill="transparent"/>
              <g transform="translate(400,300)">
                <ellipse rx="220" ry="32" fill="none" stroke="#aef7ff" stroke-width="8" opacity="0.22"/>
                <circle r="80" fill="#6fe6ff" opacity="0.98"/>
                <g transform="translate(200,-40)" fill="#fff" opacity="0.95" font-size="12"><text x="-18" y="0">Rings</text></g>
                <g fill="#eaffff" opacity="0.95">
                  <circle cx="-160" cy="-30" r="6"/>
                  <circle cx="-120" cy="80" r="5"/>
                  <circle cx="140" cy="-60" r="7"/>
                  <circle cx="90" cy="110" r="5"/>
                </g>
              </g>
            </svg>
          </div>
          <div class="meta-card" role="note" aria-label="Curiosity">
            <div style="flex:1">
              <div style="font-weight:800">Curiosity</div>
              <p style="margin:6px 0 0 0;color:var(--muted);font-size:13px">Sparse visits so far — a prime target for future missions.</p>
            </div>
            <div class="dot" aria-hidden="true"></div>
          </div>
        </aside>
      </section>

    </div>
  </main>

  <!-- side progress -->
  <div class="side-progress" aria-label="Section progress">
    <button class="dot-btn active" data-target="0" aria-controls="panel-0" aria-current="true" title="Composition"></button>
    <button class="dot-btn" data-target="1" aria-controls="panel-1" title="Atmosphere"></button>
    <button class="dot-btn" data-target="2" aria-controls="panel-2" title="Orbit"></button>
    <button class="dot-btn" data-target="3" aria-controls="panel-3" title="Curiosities"></button>
  </div>

  <script>
  /* Particles (HiDPI aware, respects reduced motion) */
  (function particles(){
    const canvas = document.getElementById('particle-canvas');
    const ctx = canvas.getContext('2d');
    let dpr, w, h;
    function resize(){
      dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
      w = canvas.width = Math.round(innerWidth * dpr);
      h = canvas.height = Math.round(innerHeight * dpr);
      canvas.style.width = innerWidth + 'px';
      canvas.style.height = innerHeight + 'px';
      ctx.setTransform(dpr,0,0,dpr,0,0);
    }
    resize();
    addEventListener('resize', resize);

    const prefersReduced = matchMedia('(prefers-reduced-motion: reduce)').matches;
    const N = Math.round((innerWidth*innerHeight)/90000);
    const parts = Array.from({length: Math.max(60, N)}, ()=>({
      x: Math.random()*innerWidth,
      y: Math.random()*innerHeight,
      r: Math.random()*1.6 + 0.2,
      vx: (Math.random()-0.5)*0.12,
      vy: (Math.random()-0.5)*0.12,
      alpha: Math.random()*0.6 + 0.12
    }));

    function step(){
      ctx.clearRect(0,0,innerWidth,innerHeight);
      for(const p of parts){
        p.x += p.vx; p.y += p.vy;
        if(p.x < -10) p.x = innerWidth + 10;
        if(p.x > innerWidth + 10) p.x = -10;
        if(p.y < -10) p.y = innerHeight + 10;
        if(p.y > innerHeight + 10) p.y = -10;
        ctx.beginPath();
        ctx.fillStyle = 'rgba(123,231,255,'+(p.alpha*0.7)+')';
        ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
        ctx.fill();
      }
      if(!prefersReduced) requestAnimationFrame(step);
    }
    step();
  })();

  /* Navigation logic (panels) */
  const panels = Array.from(document.querySelectorAll('.panel'));
  const navBtns = Array.from(document.querySelectorAll('.nav-btn'));
  const dots = Array.from(document.querySelectorAll('.dot-btn'));
  let current = 0;
  const STAGGER_DELAY = 90;
  function clamp(n,a,b){return Math.max(a, Math.min(b,n));}

  function setActive(index){
    index = clamp(index, 0, panels.length-1);
    if(index === current) return;

    panels[current].classList.remove('active');
    navBtns[current].classList.remove('active');
    navBtns[current].setAttribute('aria-pressed','false');
    dots[current].classList.remove('active');
    dots[current].removeAttribute('aria-current');

    panels[index].classList.add('active');
    navBtns[index].classList.add('active');
    navBtns[index].setAttribute('aria-pressed','true');
    dots[index].classList.add('active');
    dots[index].setAttribute('aria-current','true');

    revealStagger(panels[index]);
    current = index;
    history.replaceState(null, '', '#p'+index);
    panels[index].focus({preventScroll:true});
  }

  function revealStagger(panelEl){
    const items = panelEl.querySelectorAll('.stagger');
    items.forEach((it,i)=>{ it.classList.remove('show'); setTimeout(()=>it.classList.add('show'), i*STAGGER_DELAY + 90); });
  }

  navBtns.forEach(b=> b.addEventListener('click', ()=> setActive(Number(b.dataset.target))));
  dots.forEach(d=> d.addEventListener('click', ()=> setActive(Number(d.dataset.target))));

  addEventListener('keydown', e=>{
    if(e.key==='ArrowRight' || e.key==='ArrowDown') setActive(current+1);
    if(e.key==='ArrowLeft'  || e.key==='ArrowUp')   setActive(current-1);
    if(['1','2','3','4'].includes(e.key)) setActive(Number(e.key)-1);
    if(e.key==='Home') setActive(0);
    if(e.key==='End') setActive(panels.length-1);
  });

  (function swipe(){
    let sx=0, sy=0;
    addEventListener('touchstart', e=>{ sx=e.touches[0].clientX; sy=e.touches[0].clientY; }, {passive:true});
    addEventListener('touchend', e=>{
      const ex=e.changedTouches[0].clientX, ey=e.changedTouches[0].clientY;
      const dx=ex-sx, dy=ey-sy;
      if(Math.abs(dx)>50 && Math.abs(dx)>Math.abs(dy)){
        if(dx<0) setActive(current+1);
        if(dx>0) setActive(current-1);
      }
    }, {passive:true});
  })();

  document.addEventListener('DOMContentLoaded', ()=>{
    revealStagger(panels[0]);
    const hash = window.location.hash;
    if(hash && hash.startsWith('#p')){
      const idx = parseInt(hash.slice(2));
      if(!isNaN(idx) && idx>=0 && idx<panels.length) setActive(idx);
    }
  });
  </script>
</body>
</html>