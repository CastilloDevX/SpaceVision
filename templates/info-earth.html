<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>Earth â€” Vector Explorer</title>

<!-- Font -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">
<link rel="shortcut icon" href="{{ url_for('static', filename='img/favicon.svg') }}" type="image/x-icon">

<style>
  :root{
    --bg1: #031521;
    --bg2: #052733;
    --accent-1: #7fd3c7;
    --accent-2: #3aa79a;
    --glass: rgba(255,255,255,0.03);
    --card-border: rgba(127,211,199,0.06);
    --text: #eef7f5;
    --muted: rgba(238,247,245,0.78);
    --soft-shadow: 0 12px 40px rgba(0,0,0,0.6);
    --radius: 18px;

    --space: clamp(14px, 2.2vw, 24px);
    --panel-gap: clamp(16px, 3vw, 36px);
    --panel-radius: clamp(12px, 2.2vw, 20px);
    --title: clamp(24px, 4vw, 40px);
    --lead: clamp(15px, 2.2vw, 18px);
  }

  /* Reset */
  html,body{height:100%}
  body{
    margin:0;
    font-family:"Poppins",system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
    color:var(--text);
    background:
      radial-gradient(900px 400px at 12% 12%, rgba(127,211,199,0.02), transparent 8%),
      radial-gradient(700px 300px at 88% 88%, rgba(58,167,154,0.01), transparent 6%),
      linear-gradient(180deg,var(--bg1),var(--bg2) 60%, #000 100%);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    overflow:hidden; /* page scroll disabled; panels handle their own scroll */
  }

  /* Top header */
  header.app-header{
    position:fixed;left:0;right:0;top:0;
    display:flex;align-items:center;justify-content:space-between;gap:18px;
    padding: calc(env(safe-area-inset-top) + 12px) clamp(16px,4vw,28px) 12px;
    z-index:60;
    background:linear-gradient(180deg, rgba(0,0,0,0.12), rgba(0,0,0,0.06));
    border-bottom:1px solid rgba(255,255,255,0.03);
    backdrop-filter: blur(6px);
  }

  .brand{display:flex;align-items:center;gap:16px;min-width:0}
  .earth-emblem{
    width:clamp(48px,6.5vw,64px);height:clamp(48px,6.5vw,64px);border-radius:50%;
    background: radial-gradient(circle at 35% 30%, #d9f7f1 0%, #7fd3c7 20%, #3aa79a 55%, #155953 90%);
    box-shadow: 0 12px 40px rgba(60,160,140,0.12), inset 0 -6px 18px rgba(0,0,0,0.06);
    display:flex;align-items:center;justify-content:center;
    transform-origin:center;
    animation: gentleSpin 18s linear infinite;
    border:1px solid rgba(255,255,255,0.04);
    flex:0 0 auto;
  }
  @keyframes gentleSpin{to{transform:rotate(360deg)}}

  .brand h1{font-size:clamp(16px,2.7vw,20px);margin:0;font-weight:800;letter-spacing:.6px;white-space:nowrap}
  .brand p{margin:2px 0 0;font-size:clamp(11px,2.2vw,12px);color:var(--muted);white-space:nowrap}

  /* Top nav */
  nav.top-nav{display:flex;gap:10px;align-items:center;max-width:100%;overflow:auto;-webkit-overflow-scrolling:touch;padding-bottom:6px}
  nav.top-nav::-webkit-scrollbar{height:6px}
  nav.top-nav::-webkit-scrollbar-thumb{background:rgba(255,255,255,.12);border-radius:999px}
  .nav-btn{
    display:inline-flex;align-items:center;gap:8px;padding:8px 14px;border-radius:999px;
    background:transparent;border:1px solid rgba(255,255,255,0.03);
    color:var(--text);font-weight:700;font-size:13px;cursor:pointer;
    transition:transform .28s, box-shadow .28s, background .28s;
    backdrop-filter: blur(6px);
    white-space:nowrap;
  }
  .nav-btn svg{width:18px;height:18px;display:block}
  .nav-btn .label{display:inline}
  .nav-btn:hover{transform:translateY(-6px) scale(1.03);box-shadow:0 12px 30px rgba(60,160,140,0.12)}
  .nav-btn.active{background:linear-gradient(90deg, rgba(127,211,199,0.12), rgba(58,167,154,0.06));box-shadow:0 14px 36px rgba(58,167,154,0.12)}

  /* Viewport (uses dynamic viewport units for mobile UI chrome) */
  main.viewport{
    position:fixed;left:0;right:0;
    top:calc(64px + env(safe-area-inset-top)); /* header approx; grows with content */
    bottom:0;
    height:calc(100dvh - (64px + env(safe-area-inset-top)));
    overflow:hidden;
    padding: var(--space) clamp(16px,4vw,5%);
    z-index:20;display:flex;align-items:center;justify-content:center;
  }

  /* Panels container */
  .panels{
    width:min(1200px, 100%);
    height:100%;
    position:relative;
    display:flex;align-items:stretch;justify-content:center;
  }

  /* Panel base */
  .panel{
    position:absolute;inset:0;margin:auto;
    width:100%;height:100%;
    display:grid;grid-template-columns: 1fr minmax(300px, 480px);gap:var(--panel-gap);align-items:start;
    padding:clamp(16px, 3.5vw, 48px);border-radius:var(--panel-radius);
    background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.006));
    border: 1px solid rgba(255,255,255,0.03);
    box-shadow: var(--soft-shadow);
    transform: translateX(140%) scale(.98);
    opacity:0;transition: transform .8s cubic-bezier(.2,.9,.25,1), opacity .5s;
    will-change: transform, opacity;
    overflow-y:auto; /* key: vertical scroll inside panel */
    overflow-x:hidden;
    -webkit-overflow-scrolling: touch;
  }
  .panel.active{transform: translateX(0) scale(1);opacity:1;z-index:30}

  /* Panel inner content */
  .content{padding-right:4%;max-width:920px;min-height:0}
  .panel-title{font-size:var(--title);color:var(--accent-1);margin:0 0 10px 0;letter-spacing:.4px}
  .lead{font-size:var(--lead);color:var(--muted);line-height:1.6;margin-bottom:var(--space)}
  .card-blurb{
    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.008));
    padding:14px;border-radius:14px;border:1px solid var(--card-border);
  }

  .facts{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-top:12px}
  .fact{background:rgba(255,255,255,0.02);padding:10px;border-radius:10px;font-weight:600;color:var(--muted);font-size:13px}

  /* Right column - vector illustration + mini-card */
  .media{
    display:flex;flex-direction:column;align-items:center;gap:14px;justify-content:flex-start;padding-left:4%;
    min-height:0
  }

  .illustration-wrap, .earth-illustration-container{
    width:100%;max-width:460px;height:clamp(240px, 35vh, 420px);border-radius:16px;
    display:flex;align-items:center;justify-content:center;
    background:linear-gradient(180deg, rgba(0,0,0,0.15), rgba(0,0,0,0.10));
    border:1px solid rgba(255,255,255,0.03);
    box-shadow: 0 18px 50px rgba(0,0,0,0.5);
    overflow:hidden;position:relative;flex:0 0 auto;
  }

  /* SVG container scales nicely */
  .illustration{
    width:90%;height:90%;
    display:block;
    transform-origin:center;
    transition: transform .8s cubic-bezier(.2,.9,.25,1), filter .6s;
    filter: drop-shadow(0 12px 40px rgba(0,0,0,0.12));
  }
  .illustration-wrap:hover .illustration, .earth-illustration-container:hover .illustration{ transform: scale(1.03) rotate(-3deg) }

  .meta-card{
    width:100%;padding:12px;border-radius:12px;background:rgba(255,255,255,0.02);
    border:1px solid var(--card-border);display:flex;gap:12px;align-items:center;flex:0 0 auto;
  }
  .meta-card .dot{width:14px;height:14px;border-radius:50%;background:var(--accent-1)}
  .meta-card p{margin:0;font-size:13px;color:var(--muted)}

  /* Side progress */
  .side-progress{
    position:fixed;right:22px;top:50%;transform:translateY(-50%);display:flex;flex-direction:column;gap:12px;z-index:40;
  }
  .dot-btn{width:14px;height:14px;border-radius:50%;background:rgba(255,255,255,0.06);border:1px solid rgba(255,255,255,0.03);cursor:pointer}
  .dot-btn.active{background:linear-gradient(180deg,var(--accent-1),var(--accent-2));box-shadow:0 10px 26px rgba(58,167,154,0.14);transform:scale(1.25)}

  /* Responsive */
  @media (max-width:1100px){
    .content{padding-right:0}
    .media{padding-left:0}
  }
  @media (max-width:900px){
    main.viewport{padding: var(--space)}
    .panel{grid-template-columns:1fr}
    .earth-illustration-container{max-width:100%}
    .facts{grid-template-columns:1fr 1fr}
  }
  @media (max-width:720px){
    .brand p{display:none}
    .nav-btn{padding:8px 10px;font-size:0}
    .nav-btn .label{display:none}
    .nav-btn svg{width:20px;height:20px}
  }
  @media (max-width:640px){
    .panel{gap:var(--panel-gap);padding: clamp(12px, 3.5vw, 18px);align-items:flex-start}
    .media{order:-1}
    .earth-illustration-container{height:clamp(220px, 34vh, 320px)}
    .panel-title{font-size:clamp(20px,6vw,28px)}
    .facts{grid-template-columns:1fr}
    .side-progress{
      right:unset;left:0;right:0;bottom:env(safe-area-inset-bottom);top:auto;transform:none;
      flex-direction:row;justify-content:center;gap:10px;padding:10px 0;z-index:45
    }
    .dot-btn{width:12px;height:12px}
  }

  /* staging reveals */
  .stagger{opacity:0;transform:translateY(8px);transition: all .6s cubic-bezier(.2,.9,.25,1)}
  .stagger.show{opacity:1;transform:none}

  /* Reduced motion */
  @media (prefers-reduced-motion: reduce){
    *{animation: none !important; transition: none !important}
  }
</style>
</head>
<body>

<!-- Subtle particles (canvas) -->
<canvas id="particle-canvas" style="position:fixed;inset:0;z-index:5;pointer-events:none"></canvas>

<header class="app-header" role="banner">
  <div class="brand" aria-hidden="false">
    <div class="earth-emblem" aria-hidden="true">
      <!-- tiny globe detail -->
      <svg width="42" height="42" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <circle cx="32" cy="32" r="30" fill="#7fd3c7"/>
        <path d="M12 28c6-8 18-10 28-6" stroke="#1f6b5f" stroke-width="2" fill="none" stroke-linecap="round"/>
        <path d="M20 42c6 4 18 6 30 0" stroke="#1f6b5f" stroke-width="2" fill="none" stroke-linecap="round"/>
      </svg>
    </div>
    <div>
      <h1>EARTH</h1>
      <p>Technical vector explorer</p>
    </div>
  </div>

  <nav class="top-nav" role="navigation" aria-label="Main navigation">
    <button class="nav-btn active" data-target="0" aria-pressed="true" title="Composition & structure" aria-label="Structure">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5"/><path d="M2 12l10 5 10-5"/></svg>
      <span class="label">Structure</span>
    </button>

    <button class="nav-btn" data-target="1" title="Atmosphere" aria-label="Atmosphere">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M3 12h18"/><path d="M12 2v4"/></svg>
      <span class="label">Atmosphere</span>
    </button>

    <button class="nav-btn" data-target="2" title="Motion & orbit" aria-label="Orbit">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><circle cx="12" cy="12" r="9"/><path d="M12 3v9l3 3"/></svg>
      <span class="label">Orbit</span>
    </button>

    <button class="nav-btn" data-target="3" title="Influence & curiosities" aria-label="Curiosities">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M12 2l2 5 5 .5-4 3 1.5 5L12 14l-4.5 2.5L9 10 5 7.5 10 7z"/></svg>
      <span class="label">Curiosities</span>
    </button>
  </nav>
</header>

<main class="viewport" role="main">
  <div class="panels">

    <!-- PANEL 0: Composition & structure -->
    <section class="panel active" data-index="0" id="panel-0" aria-labelledby="title-0" role="region">
      <div class="content">
        <h2 id="title-0" class="panel-title stagger show">Composition & structure</h2>
        <p class="lead stagger show" style="transition-delay:.05s">Earth is a rocky planet composed of a <strong>metallic core</strong>, <strong>mantle</strong>, and <strong>crust</strong>. Plate tectonics creates volcanoes and mountain ranges and drives the ever-changing surface.</p>

        <div class="card-blurb stagger show" style="transition-delay:.12s">
          <strong>Core:</strong> solid inner and liquid outer core generate the magnetic field. <br>
          <strong>Mantle:</strong> convection and deformation move plates. <br>
          <strong>Crust:</strong> tectonic plates, oceans, and mountain belts.
        </div>

        <div class="facts stagger show" style="transition-delay:.20s">
          <div class="fact"><strong>Type:</strong> Rocky (terrestrial) planet</div>
          <div class="fact"><strong>Structure:</strong> Core, mantle, crust</div>
          <div class="fact"><strong>Surface:</strong> oceans, continents, mountains</div>
          <div class="fact"><strong>Tectonics:</strong> active plates</div>
        </div>
      </div>

      <aside class="media">
        <div class="earth-illustration-container" aria-hidden="false">
          <!-- SVG: schematic cross-section of Earth (technical) -->
          <svg class="illustration" viewBox="0 0 800 720" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Earth cross-section">
            <defs>
              <linearGradient id="mantleGrad" x1="0" x2="1">
                <stop offset="0%" stop-color="#f6efdd"/>
                <stop offset="100%" stop-color="#d7a36a"/>
              </linearGradient>
              <linearGradient id="coreGrad" x1="0" x2="1">
                <stop offset="0%" stop-color="#ffd9a3"/>
                <stop offset="100%" stop-color="#ff8a3d"/>
              </linearGradient>
            </defs>

            <rect width="100%" height="100%" fill="transparent"/>

            <g transform="translate(400,360)">
              <!-- outer ocean/land rim -->
              <circle r="220" fill="#1e6d7a" stroke="#0e3b3f" stroke-width="2"/>
              <!-- crust band -->
              <circle r="160" fill="#2a8f6f" stroke="#17614f" stroke-width="2"/>
              <!-- mantle -->
              <circle r="90" fill="url(#mantleGrad)" opacity="0.95"/>
              <!-- core -->
              <circle r="44" fill="url(#coreGrad)" opacity="0.98"/>

              <!-- tectonic plate lines (schematic) -->
              <g stroke="#0c2f2b" stroke-width="3" stroke-linecap="round" opacity="0.9">
                <path d="M-160,-20 C-120,-40 -80,-20 -40,-10"/>
                <path d="M20,-80 C60,-60 100,-40 140,-20"/>
                <path d="M-40,60 C0,40 40,30 90,20"/>
              </g>

              <!-- labels -->
              <g transform="translate(-240,-160)" fill="#fff" font-size="14" opacity="0.95">
                <text x="0" y="0">Crust (plates)</text>
              </g>
              <g transform="translate(-120,-20)" fill="#fff" font-size="13" opacity="0.95">
                <text x="0" y="0">Mantle â€” convection</text>
              </g>
              <g transform="translate(-60,120)" fill="#fff" font-size="13" opacity="0.95">
                <text x="0" y="0">Core (magnetic dynamo)</text>
              </g>
            </g>

            <!-- small legend -->
            <g transform="translate(40,520)">
              <rect x="0" y="0" width="320" height="70" rx="8" fill="rgba(255,255,255,0.02)"/>
              <text x="14" y="26" font-size="12" fill="#fff">Crust â†’ Mantle â†’ Core</text>
              <text x="14" y="46" font-size="11" fill="#cfeee6">Active plates â€” volcanism and mountain building</text>
            </g>
          </svg>
        </div>

        <div class="meta-card">
          <div style="flex:1">
            <div style="font-weight:800">Quick summary</div>
            <p style="margin:6px 0 0 0;color:var(--muted);font-size:13px">Layered structure with internal dynamics that sustain plate tectonics and the magnetic field.</p>
          </div>
          <div class="dot" aria-hidden="true"></div>
        </div>
      </aside>
    </section>

    <!-- PANEL 1: Atmosphere -->
    <section class="panel" data-index="1" id="panel-1" aria-labelledby="title-1" role="region">
      <div class="content">
        <h2 id="title-1" class="panel-title stagger">Atmosphere</h2>
        <p class="lead stagger" style="transition-delay:.05s">Earthâ€™s atmosphere is composed mainly of <strong>nitrogen (â‰ˆ78%)</strong> and <strong>oxygen (â‰ˆ21%)</strong>, with traces of other gases. It is essential for life, filters harmful radiation, and regulates temperature.</p>

        <div class="card-blurb stagger" style="transition-delay:.12s">
          The atmosphere (troposphere, stratosphere, mesosphere, thermosphere) includes layers with distinct functions: weather, protective ozone, and coupling with the magnetosphere.
        </div>

        <div class="facts stagger" style="transition-delay:.20s">
          <div class="fact"><strong>Composition:</strong> Nâ‚‚, Oâ‚‚, Ar, COâ‚‚ (traces)</div>
          <div class="fact"><strong>Role:</strong> protection, thermal regulation</div>
          <div class="fact"><strong>Layers:</strong> troposphere â†’ stratosphere â†’ thermosphere</div>
          <div class="fact"><strong>Ozone:</strong> UV filter</div>
        </div>
      </div>

      <aside class="media">
        <div class="earth-illustration-container">
          <!-- SVG: schematic atmosphere layers + ozone shield -->
          <svg class="illustration" viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Earthâ€™s atmosphere illustration">
            <defs>
              <linearGradient id="atm1" x1="0" x2="0"><stop offset="0%" stop-color="#bfeee6"/><stop offset="100%" stop-color="#8fd9c9"/></linearGradient>
            </defs>

            <rect width="100%" height="100%" fill="transparent"/>
            <g transform="translate(400,260)">
              <!-- planet disk -->
              <circle r="120" fill="#1f8b72" stroke="#0b4b3e" stroke-width="4"/>
              <!-- atmosphere rings -->
              <circle r="150" fill="none" stroke="url(#atm1)" stroke-width="8" opacity="0.24"/>
              <circle r="180" fill="none" stroke="url(#atm1)" stroke-width="6" opacity="0.18"/>
              <circle r="210" fill="none" stroke="url(#atm1)" stroke-width="4" opacity="0.12"/>
            </g>

            <!-- layer labels -->
            <g transform="translate(80,420)">
              <rect x="0" y="0" width="640" height="82" rx="10" fill="rgba(255,255,255,0.02)"/>
              <text x="18" y="24" font-size="13" fill="#fff">Atmospheric layers (schematic): Troposphere â†’ Stratosphere (ozone) â†’ Mesosphere â†’ Thermosphere</text>
              <text x="18" y="48" font-size="12" fill="#cfeee6">Nitrogen & Oxygen dominate; ozone filters UV; the atmosphere keeps temperatures hospitable for life.</text>
            </g>

            <!-- ozone badge -->
            <g transform="translate(580,120)">
              <circle r="26" fill="#9ce3d8" opacity="0.95"/>
              <text x="-16" y="6" font-size="12" fill="#063A33">Oâ‚ƒ</text>
            </g>
          </svg>
        </div>

        <div class="meta-card">
          <div style="flex:1">
            <div style="font-weight:800">Fact</div>
            <p style="margin:6px 0 0 0;color:var(--muted);font-size:13px">The atmosphere doesnâ€™t just support life â€” it acts as a thermal regulator and radiation shield.</p>
          </div>
          <div class="dot" aria-hidden="true"></div>
        </div>
      </aside>
    </section>

    <!-- PANEL 2: Motion & orbit -->
    <section class="panel" data-index="2" id="panel-2" aria-labelledby="title-2" role="region">
      <div class="content">
        <h2 id="title-2" class="panel-title stagger">Motion & orbit</h2>
        <p class="lead stagger" style="transition-delay:.05s">Earth takes <strong>365.25 days</strong> to complete one orbit around the Sun. It rotates once every <strong>24 hours</strong>, producing the dayâ€“night cycle. Axial tilt (~23.4Â°) causes the seasons.</p>

        <div class="card-blurb stagger" style="transition-delay:.12s">
          The combination of an elliptical orbit and axial tilt determines the seasonal distribution of solar energy at the surface.
        </div>

        <div class="facts stagger" style="transition-delay:.20s">
          <div class="fact"><strong>Year:</strong> 365.25 days</div>
          <div class="fact"><strong>Rotation:</strong> ~24 h (day)</div>
          <div class="fact"><strong>Tilt:</strong> ~23.4Â° â†’ seasons</div>
          <div class="fact"><strong>Orbit:</strong> near-circular (slight eccentricity)</div>
        </div>
      </div>

      <aside class="media">
        <div class="earth-illustration-container">
          <!-- SVG: orbit diagram + axial tilt -->
          <svg class="illustration" viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Earth orbit & rotation illustration">
            <rect width="100%" height="100%" fill="transparent"/>
            <!-- Sun -->
            <g transform="translate(400,300)">
              <circle r="28" fill="#ffd86b" opacity="0.95"/>
            </g>

            <!-- Earth's orbit -->
            <g transform="translate(400,300)">
              <ellipse rx="260" ry="200" fill="none" stroke="#6aa79a" stroke-dasharray="6 6" stroke-width="1.6" opacity="0.6"/>
              <!-- Earth marker -->
              <g transform="translate(260,0)">
                <circle r="16" fill="#1f8b72" stroke="#0b4b3e" stroke-width="2"/>
                <!-- axis tilt indicator -->
                <line x1="-8" y1="-20" x2="8" y2="20" stroke="#cfeee6" stroke-width="2" stroke-linecap="round" transform="rotate(23.4)"/>
                <text x="-14" y="44" font-size="12" fill="#fff">Earth</text>
              </g>
            </g>

            <!-- annotation -->
            <g transform="translate(40,420)">
              <rect x="0" y="0" width="640" height="60" rx="10" fill="rgba(255,255,255,0.02)" stroke="#183a36"/>
              <text x="18" y="36" font-size="13" fill="#fff">Orbit: 365.25 days â€” Rotation: 24 h â€” Axial tilt â‰ˆ 23.4Â° â†’ seasons</text>
            </g>
          </svg>
        </div>

        <div class="meta-card">
          <div style="flex:1">
            <div style="font-weight:800">Motion</div>
            <p style="margin:6px 0 0 0;color:var(--muted);font-size:13px">Rotation plus orbital motion produce daily rhythms and seasons that shape global climate.</p>
          </div>
          <div class="dot" aria-hidden="true"></div>
        </div>
      </aside>
    </section>

    <!-- PANEL 3: Influence & curiosities -->
    <section class="panel" data-index="3" id="panel-3" aria-labelledby="title-3" role="region">
      <div class="content">
        <h2 id="title-3" class="panel-title stagger">Influence & curiosities</h2>
        <p class="lead stagger" style="transition-delay:.05s">Earth is the only known planet with life. It has a <strong>Moon</strong> and a robust <strong>magnetic field</strong> that shields the surface from solar and cosmic radiation.</p>

        <div class="card-blurb stagger" style="transition-delay:.12s">
          The magnetic field originates in the liquid outer core; the Moon stabilizes axial tilt and drives tides â€” both influence climate and habitability.
        </div>

        <div class="facts stagger" style="transition-delay:.20s">
          <div class="fact"><strong>Life:</strong> only known planet</div>
          <div class="fact"><strong>Moon:</strong> present â€” strong tidal influence</div>
          <div class="fact"><strong>Magnetic field:</strong> strong â€” protective</div>
          <div class="fact"><strong>Water:</strong> oceans cover ~71% of the surface</div>
        </div>
      </div>

      <aside class="media">
        <div class="earth-illustration-container">
          <!-- SVG: magnetosphere + Moon + ocean emphasis -->
          <svg class="illustration" viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Magnetosphere and Moon">
            <rect width="100%" height="100%" fill="transparent"/>

            <!-- Earth -->
            <g transform="translate(260,300)">
              <circle r="64" fill="#1f8b72" stroke="#0b4b3e" stroke-width="3"/>
              <text x="-46" y="86" font-size="12" fill="#fff">Oceans (~71%)</text>
            </g>

            <!-- magnetosphere arcs -->
            <g transform="translate(260,300)" stroke="#8fe8d8" stroke-width="3" fill="none" opacity="0.9">
              <path d="M-160,0 C-120,-100 -80,-120 -40,-120"/>
              <path d="M-160,0 C-120,100 -80,120 -40,120"/>
            </g>

            <!-- Moon -->
            <g transform="translate(520,220)">
              <circle r="20" fill="#e6e6e6" stroke="#cfcfcf" stroke-width="2"/>
              <text x="-12" y="40" font-size="12" fill="#fff">Moon</text>
            </g>

            <!-- legend -->
            <g transform="translate(40,440)">
              <rect x="0" y="0" width="640" height="70" rx="8" fill="rgba(255,255,255,0.02)"/>
              <text x="14" y="26" font-size="13" fill="#fff">Magnetic field deflects charged particles â€” protects the biosphere.</text>
              <text x="14" y="46" font-size="11" fill="#cfeee6">The Moon stabilizes axial tilt and generates tides, key for many biological processes.</text>
            </g>
          </svg>
        </div>

        <div class="meta-card">
          <div style="flex:1">
            <div style="font-weight:800">Perspective</div>
            <p style="margin:6px 0 0 0;color:var(--muted);font-size:13px">Atmosphere, water, magnetic field, and the Moon together make Earth exceptionally habitable.</p>
          </div>
          <div class="dot" aria-hidden="true"></div>
        </div>
      </aside>
    </section>

  </div>
</main>

<!-- side progress -->
<div class="side-progress" aria-label="Section progress">
  <button class="dot-btn active" data-target="0" title="Structure" aria-label="Go to Structure"></button>
  <button class="dot-btn" data-target="1" title="Atmosphere" aria-label="Go to Atmosphere"></button>
  <button class="dot-btn" data-target="2" title="Orbit" aria-label="Go to Orbit"></button>
  <button class="dot-btn" data-target="3" title="Curiosities" aria-label="Go to Curiosities"></button>
</div>
  <!-- BotÃ³n flotante con Ã­cono de casa -->
<a href="/"
   title="Ir a inicio"
   aria-label="Inicio"
   style="
     position: fixed;
     bottom: 25px;
     right: 25px;
     width: 60px;
     height: 60px;
     background: #111;
     color: #ffffff;
     display: flex;
     align-items: center;
     justify-content: center;
     border-radius: 50%;
     box-shadow: 0 6px 18px rgba(3, 37, 65, 0.28);
     cursor: pointer;
     text-decoration: none;
     transition: all 0.2s ease;
     z-index: 9999;
   "
   onmouseover="this.style.transform='scale(1.08)'; this.style.boxShadow='0 10px 25px rgba(3,37,65,0.35)';"
   onmouseout ="this.style.transform='scale(1)'; this.style.boxShadow='0 6px 18px rgba(3,37,65,0.28)';"
   onfocus  ="this.style.outline='3px solid rgba(2,132,199,0.25)'; this.style.transform='scale(1.08)';"
   onblur   ="this.style.outline='none'; this.style.transform='scale(1)';"
>
  <svg xmlns="http://www.w3.org/2000/svg"
       width="30" height="30" viewBox="0 0 24 24" fill="none"
       stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
       style="display:block;">
    <path d="M3 9.5L12 3l9 6.5V21a1 1 0 0 1-1 1h-5v-6H9v6H4a1 1 0 0 1-1-1V9.5z"/>
  </svg>
</a>


<script>
/* ---------------------------
   Subtle particles - Canvas
   --------------------------- */
(function particles(){
  const canvas = document.getElementById('particle-canvas');
  const ctx = canvas.getContext('2d');
  let w = canvas.width = innerWidth, h = canvas.height = innerHeight;
  addEventListener('resize', ()=>{ w=canvas.width=innerWidth; h=canvas.height=innerHeight; });

  const N = Math.round((w*h)/70000);
  const parts = Array.from({length: Math.max(60, N)}, ()=>({
    x: Math.random()*w,
    y: Math.random()*h,
    r: Math.random()*1.8 + 0.3,
    vx: (Math.random()-0.5)*0.15,
    vy: (Math.random()-0.5)*0.15,
    alpha: Math.random()*0.6 + 0.15
  }));

  function step(){
    ctx.clearRect(0,0,w,h);
    for(const p of parts){
      p.x += p.vx;
      p.y += p.vy;
      if(p.x < -10) p.x = w + 10;
      if(p.x > w + 10) p.x = -10;
      if(p.y < -10) p.y = h + 10;
      if(p.y > h + 10) p.y = -10;
      ctx.beginPath();
      ctx.fillStyle = 'rgba(255,255,255,'+ (p.alpha*0.9) +')';
      ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
      ctx.fill();
    }
    requestAnimationFrame(step);
  }
  step();
})();

/* ---------------------------
   Navigation logic (panels)
   --------------------------- */
const panels = Array.from(document.querySelectorAll('.panel'));
const navBtns = Array.from(document.querySelectorAll('.nav-btn'));
const dots = Array.from(document.querySelectorAll('.dot-btn'));
let current = 0;
const STAGGER_DELAY = 90;

function clamp(n,a,b){ return Math.max(a, Math.min(b, n)); }

function setActive(index, direction=1){
  index = clamp(index, 0, panels.length-1);
  if(index === current) return;

  panels[current].classList.remove('active');
  navBtns[current].classList.remove('active');
  navBtns[current].setAttribute('aria-pressed','false');
  dots[current].classList.remove('active');

  panels[index].classList.add('active');
  navBtns[index].classList.add('active');
  navBtns[index].setAttribute('aria-pressed','true');
  dots[index].classList.add('active');

  revealStagger(panels[index]);
  current = index;
  history.replaceState(null, '', '#p'+index);
}

function revealStagger(panelEl){
  const items = panelEl.querySelectorAll('.stagger');
  items.forEach((it, i) => {
    it.classList.remove('show');
    setTimeout(()=> it.classList.add('show'), i * STAGGER_DELAY + 90);
  });
}

// click handlers
navBtns.forEach(b => b.addEventListener('click', ()=> {
  const target = Number(b.dataset.target);
  setActive(target, target > current ? 1 : -1);
}));
dots.forEach(d => d.addEventListener('click', ()=> {
  const target = Number(d.dataset.target);
  setActive(target, target > current ? 1 : -1);
}));

// keyboard
addEventListener('keydown', e => {
  if(e.key === 'ArrowRight' || e.key === 'ArrowDown'){ setActive(current+1, 1); }
  if(e.key === 'ArrowLeft'  || e.key === 'ArrowUp'){   setActive(current-1, -1); }
});

// swipe
(function swipe(){
  let sx=0, sy=0;
  addEventListener('touchstart', e => { sx = e.touches[0].clientX; sy = e.touches[0].clientY; }, {passive:true});
  addEventListener('touchend', e => {
    const ex = e.changedTouches[0].clientX, ey = e.changedTouches[0].clientY;
    const dx = ex - sx, dy = ey - sy;
    if(Math.abs(dx) > 50 && Math.abs(dx) > Math.abs(dy)){
      if(dx < 0) setActive(current+1,1);
      if(dx > 0) setActive(current-1,-1);
    }
  }, {passive:true});
})();

// init
document.addEventListener('DOMContentLoaded', ()=> {
  revealStagger(panels[0]);
  const hash = window.location.hash;
  if(hash && hash.startsWith('#p')){
    const idx = parseInt(hash.slice(2));
    if(!isNaN(idx) && idx >= 0 && idx < panels.length) setActive(idx);
  }
});
</script>
</body>
</html>
